//
	(c) 2021 Nikita Karamov
	SPDX-License-Identifier: MIT
	https://github.com/NickKaramoff/website

doctype html
html(lang=defaultLanguage dir="ltr")
	head
		//- critical meta
		meta(charset="utf-8")
		meta(name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover")
		meta(http-equiv="x-ua-compatible" content="ie=edge")

		//- preconnect to CDNs
		link(rel="preconnect", href="https://cdn.jsdelivr.net" crossorigin)
		link(rel="preconnect", href="https://fonts.googleapis.com" crossorigin)
		link(rel="preconnect", href="https://fonts.gstatic.com" crossorigin)

		//- meta about me
		title.vavilon(data-vavilon="name")= name[defaultLanguage]
		meta(name="description" content=descriptionMeta[defaultLanguage])
		meta(name="theme-color" content="#cc2233")
		link(rel="license" href="https://github.com/NickKaramoff/website/blob/main/LICENSE")

		//- meta for robots
		meta(name="robots" content="index,follow")
		meta(name="googlebot" content="index,follow")
		meta(name="google" content="nositelinkssearchbox")
		meta(name="yandex-verification" content="2fdc38f5d667ea71")

		//- favicons
		link(rel="icon" type="image/x-icon"  href=`/favicon.ico?v=${version}`)
		link(rel="icon" type="image/svg+xml" href=`/icon.svg?v=${version}`)
		link(rel="apple-touch-icon" href=`/apple-touch-icon.png?v=${version}`)
		link(rel="mask-icon" href=`/safari-pinned-tab.svg?v=${version}` color="#cc2233")
		link(rel="manifest" href=`/site.webmanifest?v=${version}`)

		//- stylesheets
		link(rel="stylesheet" type="text/css" href="/main.css")

		//- vavilon
		each lang in languages
			script(type="application/json" data-vavilon-dict=lang src=`/${lang}.json`)
		script(src="https://cdn.jsdelivr.net/npm/vavilon@1.1/dist/vavilon.min.js" defer)

		//- Google Fonts
		link(href="https://fonts.googleapis.com/css2?family=IBM+Plex+Mono:wght@400;500&family=IBM+Plex+Sans:wght@500&display=swap"
		     rel="preload" as="style")
		link(href="https://fonts.googleapis.com/css2?family=IBM+Plex+Mono:wght@400;500&family=IBM+Plex+Sans:wght@500&display=swap"
		     rel="stylesheet" media="print" onload="this.media='all'")
		noscript
			link(href="https://fonts.googleapis.com/css2?family=IBM+Plex+Mono:wght@400;500&family=IBM+Plex+Sans:wght@500&display=swap"
			     rel="stylesheet")

		//- stop phone detection
		meta(name="format-detection" content="telephone=no")
		meta(name="skype_toolbar" content="skype_toolbar_parser_compatible")

	body
		main
			section.bio#bio
				.bio__head
					.bio__head__info
						picture
							source(srcset="/images/me@2x.webp" type="image/webp")
							img.bio__head__info__image(src="/images/me@2x.jpg" alt="Nikita Karamov.", width=48, height=48)
						h1.bio__head__info__name.vavilon(data-vavilon="name")= name[defaultLanguage]
					.bio__head__flags
						each lang in languages
							button.flag(onclick=`setLang('${lang}')` title=languageNames[languages.indexOf(lang)] type="button")
								img(src=`/images/${lang}.svg` alt="" width=0 height=0 aria-hidden="true")
								= languageNames[languages.indexOf(lang)]
				.bio__bubble
					each descriptionItem, idx in description[defaultLanguage]
						p.vavilon(data-vavilon="description-" + idx)= descriptionItem

			section#links
				ul.links
					each social in socials
						li.links__item
							a.links__item__link.vavilon(style=`background-image: linear-gradient(${social.color}, ${social.color});`
								data-vavilon=social.slug
								href=social.link
								rel=social.rel || null)= social.name[defaultLanguage]

			each mod in listModules
				section(id=mod.slug)
					h2.vavilon(data-vavilon="m-" + mod.slug)= mod.title[defaultLanguage]
					ul.section-list
						each item in mod.items
							li.section-list__item
								a.section-list__item__link(href=item.href)
									.section-list__item__link__info
										.section-list__item__link__info__year= item.year
										h3.section-list__item__link__info__title.vavilon(data-vavilon="m-" + mod.slug + "-" + item.slug + "-name")= item.name[defaultLanguage] || item.name
									p.section-list__item__link__description.vavilon(data-vavilon="m-" + mod.slug + "-" + item.slug + "-desc")= item.description[defaultLanguage]

		footer.footer
			| &copy;&nbsp;2020
			|
			span.vavilon(data-vavilon="name")= name[defaultLanguage]
